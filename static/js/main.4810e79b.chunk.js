(this["webpackJsonpxm-evanguo.github.io"]=this["webpackJsonpxm-evanguo.github.io"]||[]).push([[0],{79:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(0),i=n.n(r),s=n(8),c=n.n(s),o=(n(79),n(49)),l=n(15),u=n.n(l),d=n(24),h=n(57),p=n(66),f=n(64),b=n(4),g=n(126),m=n(131),x=n(130),v=n(65),j=n(127),O=n(122),L=n(132),k=function(e){var t=e.onSearchClick,n=w(),i=Object(r.useState)(),s=Object(v.a)(i,2),c=s[0],o=s[1];return Object(a.jsxs)(O.a,{component:"form",className:n.root,children:[Object(a.jsx)(L.a,{className:n.input,placeholder:"Please enter movie title",onChange:function(e){return o(e.target.value)}}),Object(a.jsx)(g.a,{variant:"outlined",color:"primary",onClick:function(){return t(c)},children:"Search"})]})},w=Object(j.a)((function(e){return{root:{display:"flex",alignItems:"center",width:800,padding:20,marginBottom:10},input:{marginLeft:e.spacing(1),flex:1}}})),C=n(128),y=n(129),S=function(e){var t=e.data,n=e.rowBtn,r=e.mode,i=e.nextPageBtn,s=e.lastPageBtn,c=e.lastPageBtnDisable,o=e.nextPageBtnDisable,l=e.disableAllRowBtn,u=B();return Object(a.jsxs)(O.a,{component:"div",className:u.root,children:[Object(a.jsx)("h4",{className:u.title,children:"search"===r?"Search Result":"Nominated"}),Object(a.jsx)(y.a,{children:t.map((function(e){return function(e){return Object(a.jsxs)(C.a,{className:u.row,children:[Object(a.jsx)("h10",{className:u.text,children:"".concat(e.title," (").concat(e.year,")")}),Object(a.jsx)(g.a,{variant:"outlined",color:"primary",onClick:function(){return n(e)},disabled:!!l||"search"===r&&e.selected,className:u.btn,children:"search"===r?"Nominate":"Remove"})]},e.id)}(e)}))}),(!c||!o)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g.a,{variant:"outlined",color:"primary",onClick:s,disabled:c,className:u.pageBtn,children:"Last"}),Object(a.jsx)(g.a,{variant:"outlined",color:"primary",onClick:i,disabled:o,className:u.pageBtn,children:"Next"})]})]})},B=Object(j.a)((function(e){return{root:{paddingBottom:10,paddingRight:5,marginBottom:10,width:400},title:{marginLeft:16},row:{display:"flex",flex:1,justifyContent:"space-between",alignItems:"center",width:400},btn:{marginLeft:5},text:{marginRight:e.spacing(1),flex:1},pageBtn:{marginLeft:5}}})),P=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.omdbapi.com/?apikey=5f098a0e&s=".concat(t,"&type=movie&page=").concat(n+1));case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r.Search);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error in services");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.omdbapi.com/?apikey=5f098a0e&i=".concat(t,"&type=movie"));case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error in services");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),D=n(61),T=n.n(D),M=n(62),I=n(48),F=(n(89),function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).componentDidMount=Object(d.a)(u.a.mark((function e(){var t,n,a,i,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.location,n=t.search,a=T.a.parse(n),!(i=a.id)){e.next=18;break}return s=[],c=[],c="string"===typeof i?[i]:i,e.prev=7,e.next=10,Promise.all(c.map(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:return n=e.sent,a={id:n.imdbID,title:n.Title,year:n.Year},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:s=(s=e.sent).filter((function(e,t,n){return!!e.id&&t===n.findIndex((function(t){return t.id===e.id}))})),r.setState({selectedList:s.slice(0,5)}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),console.log("error in componentDidMount",e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])}))),r.searchMovie=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,i,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.state.selectedList,e.prev=1,e.next=4,P(t,n);case 4:if((i=e.sent)&&0!==i.length){e.next=9;break}return r.setState({searchList:[]}),r.noMovieFound(),e.abrupt("return");case 9:if(!(n<99)){e.next=16;break}return e.next=12,P(t,n+1);case 12:s=e.sent,r.setState({nextSearchDisable:!s||0===s.length}),e.next=17;break;case 16:r.setState({nextSearchDisable:!0});case 17:c=i.map((function(e){return{id:e.imdbID,title:e.Title,year:e.Year,selected:-1!==a.findIndex((function(t){return t.id===e.imdbID}))}})),r.setState({searchList:c}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.log("error in searchMovie",e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t,n){return e.apply(this,arguments)}}(),r.addToSelectedList=function(e){var t=r.state,n=t.searchList,a=t.selectedList;if(!(a.length>=5)){var i=n.findIndex((function(t){return t.id===e.id}));n[i].selected=!0;var s=[].concat(Object(o.a)(a),[e]);r.setState({searchList:n,selectedList:s})}},r.removeFromSelectedList=function(e){var t=r.state,n=t.searchList,a=t.selectedList,i=a.findIndex((function(t){return t.id===e.id})),s=[].concat(Object(o.a)(a.slice(0,i)),Object(o.a)(a.slice(i+1,a.length))),c=n.findIndex((function(t){return t.id===e.id}));-1!==c&&(n[c].selected=!1),r.setState({selectedList:s})},r.getNextSearchPage=function(){var e=r.state,t=e.searchListPage,n=e.movieTitle,a=t+1;r.searchMovie(n,a),r.setState({searchListPage:a})},r.getLastSearchPage=function(){var e=r.state,t=e.searchListPage,n=e.movieTitle,a=t-1;r.searchMovie(n,a),r.setState({searchListPage:a})},r.updateMovieTitle=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return r.setState({movieTitle:t}),e.prev=3,e.next=6,r.searchMovie(t,0);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("error in updateMovieTitle",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),r.shareLink=function(){var e=r.state.selectedList,t="https://xm-evanguo.github.io/shopify-challenge/?";e.forEach((function(e,n){t+=0===n?"id=".concat(e.id):"&id=".concat(e.id)})),r.setState({modalVisible:!0,shareLink:t})},r.onModalClose=function(){r.setState({modalVisible:!1})},r.afterCopyClick=function(){I.b.success("Successfully copy to clipboard",{position:"top-center",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},r.noMovieFound=function(){I.b.error("No movie found",{position:"top-center",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},r.render=function(){var e=r.state,t=e.searchList,n=e.nextSearchDisable,i=e.searchListPage,s=e.selectedList,c=e.modalVisible,o=e.shareLink,l=r.props.classes;return Object(a.jsxs)("div",{className:l.background,children:[Object(a.jsxs)(O.a,{className:l.center,children:[Object(a.jsx)("h2",{children:"Movie Awards for Entrepreneurs"}),Object(a.jsx)(k,{onSearchClick:r.updateMovieTitle}),s.length>4&&Object(a.jsx)(O.a,{className:l.banner,children:Object(a.jsx)("p",{className:l.bannerText,children:"You have nominated 5 movies"})}),Object(a.jsxs)("div",{className:l.container,children:[Object(a.jsx)(S,{mode:"search",data:t,className:l.searchList,rowBtn:r.addToSelectedList,nextPageBtn:r.getNextSearchPage,nextPageBtnDisable:n,lastPageBtn:r.getLastSearchPage,lastPageBtnDisable:0===i,disableAllRowBtn:s.length>=5}),Object(a.jsx)(S,{mode:"selected",data:s,rowBtn:r.removeFromSelectedList,lastPageBtnDisable:!0,nextPageBtnDisable:!0})]}),0!==s.length&&Object(a.jsx)(g.a,{variant:"outlined",color:"primary",onClick:r.shareLink,className:l.pageBtn,children:"Create share link"})]}),Object(a.jsx)(m.a,{open:c,onClose:r.onModalClose,children:Object(a.jsxs)(O.a,{className:[l.shareLinkContainer,l.center],children:[Object(a.jsx)(x.a,{disabled:!0,multiline:!0,label:"Share Link",defaultValue:o,className:l.link}),Object(a.jsx)(M.CopyToClipboard,{text:o,onCopy:r.afterCopyClick,children:Object(a.jsx)(g.a,{variant:"outlined",color:"primary",onClick:r.shareLink,className:l.pageBtn,children:"Copy"})})]})}),Object(a.jsx)(I.a,{position:"top-center",autoClose:2e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0})]})},r.state={searchList:[],selectedList:[],searchListPage:0,movieTitle:"",nextSearchDisable:!0,modalVisible:!1,shareLink:""},r}return n}(i.a.Component)),R=Object(b.a)((function(e){return{background:{width:"100%",height:"100vh",backgroundColor:"#f5f5f5"},banner:{padding:1,marginBottom:10,backgroundColor:"#f75563"},bannerText:{color:"#ffffff",textAlign:"center",verticalAlign:"middle"},center:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:50},container:{display:"flex",flexDirection:"row",flex:1,justifyContent:"space-between"},searchList:{marginRight:10},shareLinkContainer:{minHeight:50,width:"50%",display:"flex",flexDirection:"row",alignItems:"center"},link:{width:"100%"},pageBtn:{marginLeft:5}}}))(F),A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,134)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))},E=n(63),V=n(10);c.a.render(Object(a.jsx)(E.a,{children:Object(a.jsx)(V.a,{path:"/",component:R})}),document.getElementById("root")),A()}},[[95,1,2]]]);
//# sourceMappingURL=main.4810e79b.chunk.js.map